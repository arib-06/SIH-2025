<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link crossorigin="" href="https://fonts.gstatic.com/" rel="preconnect" />
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Playfair+Display:wght@400;500;600;700&display=swap"
        rel="stylesheet" />
    <title>AR Monument Guide - Traverse</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/ar.js@2.2.2/aframe/build/aframe-ar.min.js"></script>
    
    <style>
        /* Custom styles matching the main site */
        :root {
            --primary: #2563eb;
            --secondary: #1d4ed8;
        }
        
        .font-display {
            font-family: 'Playfair Display', serif;
        }
        
        .text-gradient {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(37, 99, 235, 0.3);
        }
        
        .hover-lift {
            transition: all 0.3s ease;
        }
        
        .hover-lift:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }
        
        /* AR specific styles */
        #ar-scene {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 1;
        }
        
        .ar-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 2;
            pointer-events: none;
        }
        
        .ar-ui {
            pointer-events: auto;
        }
        
        .ar-instructions {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 0.7; }
            50% { opacity: 1; }
        }
        
        /* Mobile responsive adjustments */
        @media (max-width: 768px) {
            .ar-header {
                padding: 1rem;
            }
            .ar-footer {
                padding: 0.5rem;
            }
        }
    </style>
</head>

<body class="bg-gradient-to-br from-slate-900 via-slate-800 to-blue-900 min-h-screen font-sans">
    <!-- AR Scene -->
    <a-scene
        id="ar-scene"
        embedded
        arjs="sourceType: webcam; debugUIEnabled: false; detectionMode: mono_and_matrix; matrixCodeType: 3x3;"
        vr-mode-ui="enabled: false"
        renderer="logarithmicDepthBuffer: true;"
        device-orientation-permission-ui="enabled: false">
        
        <!-- Assets -->
        <a-assets>
            <!-- Placeholder monument model - in production, replace with actual GLB file -->
            <a-box id="monument-model" 
                   position="0 1 0" 
                   scale="0.8 1.2 0.8" 
                   color="#8B4513" 
                   material="roughness: 0.3; metalness: 0.1">
                <!-- Decorative elements to make it look more monument-like -->
                <a-cylinder position="0 1 0" radius="0.9" height="0.2" color="#CD853F"></a-cylinder>
                <a-cylinder position="0 1.5 0" radius="0.7" height="0.3" color="#D2691E"></a-cylinder>
                <a-sphere position="0 1.8 0" radius="0.4" color="#F4A460"></a-sphere>
            </a-box>
        </a-assets>

        <!-- Marker -->
        <a-marker preset="hiro" id="hiro-marker">
            <!-- 3D Taj Mahal Monument Model -->
            <a-entity id="monument-entity" position="0 0 0" scale="0.8 0.8 0.8">
                
                <!-- Main Platform Base -->
                <a-box position="0 0.1 0" 
                       width="4" height="0.2" depth="4" 
                       color="#F5F5DC" 
                       material="roughness: 0.2; metalness: 0.1">
                </a-box>
                
                <!-- Central Tomb Structure -->
                <a-entity id="main-tomb" position="0 1.2 0">
                    <!-- Main cubic base -->
                    <a-box position="0 0 0" 
                           width="2" height="1.5" depth="2" 
                           color="#FFFAF0" 
                           material="roughness: 0.1; metalness: 0.05"
                           animation="property: rotation; to: 0 360 0; loop: true; dur: 30000">
                        
                        <!-- Arch details on each face -->
                        <a-cylinder position="0 0 1.01" radius="0.3" height="0.02" color="#E6E6FA" 
                                   rotation="90 0 0"></a-cylinder>
                        <a-cylinder position="0 0 -1.01" radius="0.3" height="0.02" color="#E6E6FA" 
                                   rotation="90 0 0"></a-cylinder>
                        <a-cylinder position="1.01 0 0" radius="0.3" height="0.02" color="#E6E6FA" 
                                   rotation="90 0 90"></a-cylinder>
                        <a-cylinder position="-1.01 0 0" radius="0.3" height="0.02" color="#E6E6FA" 
                                   rotation="90 0 90"></a-cylinder>
                    </a-box>
                    
                    <!-- Central Dome -->
                    <a-sphere position="0 1.3 0" 
                             radius="0.6" 
                             color="#F0F8FF" 
                             material="roughness: 0.05; metalness: 0.1"
                             animation="property: scale; to: 1.05 1.05 1.05; dir: alternate; dur: 4000; loop: true">
                    </a-sphere>
                    
                    <!-- Central Spire -->
                    <a-cone position="0 2.1 0" 
                           radius-bottom="0.08" radius-top="0.02" height="0.4" 
                           color="#FFD700" 
                           material="roughness: 0.0; metalness: 0.9">
                    </a-cone>
                    
                    <!-- Crescent Moon on top -->
                    <a-torus position="0 2.4 0" 
                            radius="0.05" radius-tubular="0.015" 
                            color="#FFD700" 
                            rotation="45 0 0"
                            animation="property: rotation; to: 45 360 0; loop: true; dur: 10000">
                    </a-torus>
                </a-entity>
                
                <!-- Four Corner Minarets -->
                <a-entity id="minarets">
                    <!-- Front Left Minaret -->
                    <a-entity position="-1.8 2.5 1.8">
                        <a-cylinder radius="0.08" height="3" color="#FFFAF0" 
                                   material="roughness: 0.1; metalness: 0.05">
                        </a-cylinder>
                        <a-sphere position="0 1.7 0" radius="0.15" color="#F0F8FF"></a-sphere>
                        <a-cone position="0 1.95 0" radius-bottom="0.06" radius-top="0.02" height="0.2" color="#FFD700"></a-cone>
                    </a-entity>
                    
                    <!-- Front Right Minaret -->
                    <a-entity position="1.8 2.5 1.8">
                        <a-cylinder radius="0.08" height="3" color="#FFFAF0" 
                                   material="roughness: 0.1; metalness: 0.05">
                        </a-cylinder>
                        <a-sphere position="0 1.7 0" radius="0.15" color="#F0F8FF"></a-sphere>
                        <a-cone position="0 1.95 0" radius-bottom="0.06" radius-top="0.02" height="0.2" color="#FFD700"></a-cone>
                    </a-entity>
                    
                    <!-- Back Left Minaret -->
                    <a-entity position="-1.8 2.5 -1.8">
                        <a-cylinder radius="0.08" height="3" color="#FFFAF0" 
                                   material="roughness: 0.1; metalness: 0.05">
                        </a-cylinder>
                        <a-sphere position="0 1.7 0" radius="0.15" color="#F0F8FF"></a-sphere>
                        <a-cone position="0 1.95 0" radius-bottom="0.06" radius-top="0.02" height="0.2" color="#FFD700"></a-cone>
                    </a-entity>
                    
                    <!-- Back Right Minaret -->
                    <a-entity position="1.8 2.5 -1.8">
                        <a-cylinder radius="0.08" height="3" color="#FFFAF0" 
                                   material="roughness: 0.1; metalness: 0.05">
                        </a-cylinder>
                        <a-sphere position="0 1.7 0" radius="0.15" color="#F0F8FF"></a-sphere>
                        <a-cone position="0 1.95 0" radius-bottom="0.06" radius-top="0.02" height="0.2" color="#FFD700"></a-cone>
                    </a-entity>
                </a-entity>
                
                <!-- Decorative Garden Elements -->
                <a-entity id="garden-elements">
                    <!-- Water channel simulation -->
                    <a-box position="0 0.25 -3" width="0.3" height="0.05" depth="2" 
                           color="#87CEEB" 
                           material="roughness: 0.0; metalness: 0.8; opacity: 0.8"
                           animation="property: material.color; to: #4169E1; dir: alternate; dur: 3000; loop: true">
                    </a-box>
                    
                    <!-- Cypress trees -->
                    <a-cone position="-3 1 0" radius-bottom="0.1" radius-top="0.05" height="1.5" 
                           color="#228B22" rotation="0 0 0"></a-cone>
                    <a-cone position="3 1 0" radius-bottom="0.1" radius-top="0.05" height="1.5" 
                           color="#228B22" rotation="0 0 0"></a-cone>
                    <a-cone position="0 1 3" radius-bottom="0.1" radius-top="0.05" height="1.5" 
                           color="#228B22" rotation="0 0 0"></a-cone>
                </a-entity>
            </a-entity>
            
            <!-- Floating Information Text -->
            <a-text 
                position="0 4.5 0" 
                align="center" 
                value="🕌 TAJ MAHAL 🕌\n━━━━━━━━━━━━━━━━━\nBuilt: 1632-1653 CE\nLocation: Agra, India\nArchitect: Ustad Ahmad Lahori\n━━━━━━━━━━━━━━━━━\n💎 UNESCO World Heritage Site\n👑 Symbol of Eternal Love\n🏛️ Mughal Architecture Masterpiece" 
                color="#FFFFFF" 
                font="kelsonsans"
                width="8"
                geometry="primitive: plane; width: 5; height: 2.5"
                material="color: rgba(25,25,112,0.9); opacity: 0.95"
                animation="property: position; to: 0 5 0; dir: alternate; dur: 4000; loop: true; easing: easeInOutSine">
            </a-text>
            
            <!-- Additional Info Panel -->
            <a-text 
                position="3 2.5 0" 
                align="center" 
                value="📏 DIMENSIONS\n━━━━━━━━━\nHeight: 73m\nWidth: 55m\nDome: 35m\n\n🏗️ MATERIALS\n━━━━━━━━━\nWhite Marble\nRed Sandstone\nPrecious Gems\nCalligraphy" 
                color="#FFD700" 
                font="kelsonsans"
                width="4"
                geometry="primitive: plane; width: 2.5; height: 2"
                material="color: rgba(139,69,19,0.8); opacity: 0.9"
                animation="property: rotation; to: 0 10 0; dir: alternate; dur: 3000; loop: true">
            </a-text>
            
            <!-- Historical Timeline -->
            <a-text 
                position="-3 2.5 0" 
                align="center" 
                value="📅 TIMELINE\n━━━━━━━━━\n1631: Construction Begins\n1643: Main Tomb Complete\n1648: Minarets Finished\n1653: Final Completion\n\n👥 WORKFORCE\n━━━━━━━━━\n20,000 Workers\n1,000 Elephants\n22 Years to Build" 
                color="#FFE4E1" 
                font="kelsonsans"
                width="4"
                geometry="primitive: plane; width: 2.5; height: 2"
                material="color: rgba(75,0,130,0.8); opacity: 0.9"
                animation="property: rotation; to: 0 -10 0; dir: alternate; dur: 3500; loop: true">
            </a-text>
            
            <!-- Enhanced Glowing particles effect -->
            <a-entity id="particles">
                <!-- Golden particles around the dome -->
                <a-sphere position="1 3 1" radius="0.03" color="#FFD700" 
                         material="emissive: #FFD700; emissiveIntensity: 0.5"
                         animation="property: position; to: 1.5 4 1.5; dir: alternate; dur: 2000; loop: true"></a-sphere>
                <a-sphere position="-1 3.5 -1" radius="0.03" color="#FFD700" 
                         material="emissive: #FFD700; emissiveIntensity: 0.5"
                         animation="property: position; to: -1.5 4.5 -1.5; dir: alternate; dur: 2500; loop: true"></a-sphere>
                <a-sphere position="0.5 3.2 -1.2" radius="0.03" color="#FFD700" 
                         material="emissive: #FFD700; emissiveIntensity: 0.5"
                         animation="property: position; to: 0.8 4.2 -1.8; dir: alternate; dur: 1800; loop: true"></a-sphere>
                <a-sphere position="-0.8 3.8 0.8" radius="0.03" color="#FFD700" 
                         material="emissive: #FFD700; emissiveIntensity: 0.5"
                         animation="property: position; to: -1.2 4.8 1.2; dir: alternate; dur: 2200; loop: true"></a-sphere>
                
                <!-- White marble sparkles -->
                <a-sphere position="0.3 2 0.3" radius="0.02" color="#FFFFFF" 
                         material="emissive: #FFFFFF; emissiveIntensity: 0.3"
                         animation="property: scale; to: 1.5 1.5 1.5; dir: alternate; dur: 1500; loop: true"></a-sphere>
                <a-sphere position="-0.4 2.5 -0.4" radius="0.02" color="#FFFFFF" 
                         material="emissive: #FFFFFF; emissiveIntensity: 0.3"
                         animation="property: scale; to: 1.5 1.5 1.5; dir: alternate; dur: 1700; loop: true"></a-sphere>
                <a-sphere position="0.6 2.3 -0.2" radius="0.02" color="#FFFFFF" 
                         material="emissive: #FFFFFF; emissiveIntensity: 0.3"
                         animation="property: scale; to: 1.5 1.5 1.5; dir: alternate; dur: 1900; loop: true"></a-sphere>
                
                <!-- Blue water reflection particles -->
                <a-sphere position="0 0.3 -3" radius="0.02" color="#87CEEB" 
                         material="emissive: #87CEEB; emissiveIntensity: 0.4"
                         animation="property: position; to: 0.2 0.4 -2.8; dir: alternate; dur: 2800; loop: true"></a-sphere>
                <a-sphere position="0.1 0.35 -2.9" radius="0.02" color="#4169E1" 
                         material="emissive: #4169E1; emissiveIntensity: 0.4"
                         animation="property: position; to: -0.1 0.45 -3.1; dir: alternate; dur: 3200; loop: true"></a-sphere>
            </a-entity>
        </a-marker>

        <!-- Camera -->
        <a-entity camera></a-entity>
    </a-scene>

    <!-- AR Overlay UI -->
    <div class="ar-overlay">
        <!-- Header -->
        <div class="ar-ui ar-header glass-effect rounded-b-3xl mx-4 mt-4 p-4 text-center">
            <div class="flex items-center justify-center space-x-2">
                <div class="w-8 h-8 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center">
                    <span class="text-white text-lg">🏛️</span>
                </div>
                <h1 class="text-2xl font-display font-bold text-gradient">AR Monument Guide</h1>
            </div>
            <p class="text-sm text-slate-600 mt-2">Powered by Traverse</p>
        </div>

        <!-- Center Instructions -->
        <div class="flex items-center justify-center h-full">
            <div class="ar-ui ar-instructions glass-effect rounded-2xl p-6 mx-4 text-center max-w-sm">
                <div class="text-4xl mb-4">📱</div>
                <h3 class="text-lg font-semibold mb-2 text-slate-800">Scan Hiro Marker</h3>
                <p class="text-sm text-slate-600 mb-4">Point your camera at the Hiro marker to see the magnificent Taj Mahal in 3D with detailed historical information!</p>
                
                <div class="flex items-center space-x-2 text-xs mb-4">
                    <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
                    <span class="text-slate-600">Camera Active</span>
                </div>
                
                <!-- Quick Marker Access -->
                <div class="text-xs text-slate-500 mb-3">
                    <p class="mb-1">📱 <strong>Need a Hiro Marker?</strong></p>
                    <a href="https://ar-js-org.github.io/AR.js/data/images/hiro.png" 
                       target="_blank" 
                       class="text-blue-600 hover:text-blue-800 underline">
                        Download Hiro Marker →
                    </a>
                    <p class="mt-1 text-xs">Print it or display on another screen</p>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="ar-ui ar-footer absolute bottom-0 left-0 right-0 glass-effect rounded-t-3xl mx-4 mb-4 p-4">
            <div class="text-center">
                <p class="text-sm text-slate-600 mb-2">Point your camera at the marker to explore</p>
                <div class="flex justify-center space-x-4 text-xs text-slate-500">
                    <span class="flex items-center space-x-1">
                        <div class="w-2 h-2 bg-blue-500 rounded-full"></div>
                        <span>AR Experience</span>
                    </span>
                    <span class="flex items-center space-x-1">
                        <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                        <span>3D Models</span>
                    </span>
                    <span class="flex items-center space-x-1">
                        <div class="w-2 h-2 bg-purple-500 rounded-full"></div>
                        <span>Tourist Guide</span>
                    </span>
                </div>
                
                <!-- Demo and navigation buttons -->
                <div class="flex flex-col sm:flex-row gap-2 mt-3 justify-center">
                    <button onclick="showDemo()" class="btn-primary text-white px-4 py-2 rounded-full text-sm font-medium hover-lift">
                        🕌 Show Demo
                    </button>
                    <button onclick="hideDemo()" class="bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-full text-sm font-medium hover-lift">
                        Hide Demo
                    </button>
                    <button onclick="goHome()" class="bg-slate-600 hover:bg-slate-700 text-white px-4 py-2 rounded-full text-sm font-medium hover-lift">
                        ← Back to Traverse
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading overlay -->
    <div id="loading-overlay" class="fixed inset-0 bg-slate-900 flex items-center justify-center z-50">
        <div class="text-center">
            <div class="glass-effect rounded-2xl p-8">
                <div class="text-6xl mb-4">🏛️</div>
                <h2 class="text-2xl font-display font-bold text-white mb-2">Loading AR Experience</h2>
                <p class="text-slate-300 mb-4">Preparing your monument guide...</p>
                <div class="flex justify-center space-x-2">
                    <div class="w-3 h-3 bg-blue-500 rounded-full animate-bounce"></div>
                    <div class="w-3 h-3 bg-purple-500 rounded-full animate-bounce" style="animation-delay: 0.1s"></div>
                    <div class="w-3 h-3 bg-green-500 rounded-full animate-bounce" style="animation-delay: 0.2s"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Hide loading overlay after AR scene is ready
        document.querySelector('a-scene').addEventListener('loaded', function () {
            setTimeout(() => {
                document.getElementById('loading-overlay').style.display = 'none';
            }, 2000);
        });

        // AR Marker detection events
        const marker = document.querySelector('#hiro-marker');
        const instructions = document.querySelector('.ar-instructions');

        marker.addEventListener('markerFound', function() {
            console.log('Taj Mahal Marker found!');
            instructions.style.display = 'none';
            
            // Add dramatic entrance animation
            const monumentEntity = document.querySelector('#monument-entity');
            const mainTomb = document.querySelector('#main-tomb');
            const minarets = document.querySelector('#minarets');
            
            // Monument entrance animation
            monumentEntity.setAttribute('animation', 'property: scale; from: 0.1 0.1 0.1; to: 0.8 0.8 0.8; dur: 2000; easing: easeOutElastic');
            
            // Staggered minaret animation
            setTimeout(() => {
                minarets.setAttribute('animation', 'property: position; to: 0 0.2 0; dur: 1000; easing: easeOutBounce');
            }, 1000);
            
            // Dome glow effect
            setTimeout(() => {
                const dome = mainTomb.querySelector('a-sphere');
                dome.setAttribute('material', 'color: #F0F8FF; emissive: #FFFFFF; emissiveIntensity: 0.2');
            }, 1500);
        });

        marker.addEventListener('markerLost', function() {
            console.log('Marker lost!');
            instructions.style.display = 'block';
        });

        // Demo mode functions
        function showDemo() {
            const monumentEntity = document.querySelector('#monument-entity');
            const scene = document.querySelector('a-scene');
            
            // Create a temporary demo entity without marker dependency
            const demoEntity = document.createElement('a-entity');
            demoEntity.id = 'demo-monument';
            demoEntity.setAttribute('position', '0 0 -5');
            demoEntity.innerHTML = monumentEntity.innerHTML;
            
            // Remove any existing demo
            const existingDemo = document.querySelector('#demo-monument');
            if (existingDemo) {
                existingDemo.parentNode.removeChild(existingDemo);
            }
            
            scene.appendChild(demoEntity);
            
            // Add entrance animation
            demoEntity.setAttribute('animation', 'property: scale; from: 0.1 0.1 0.1; to: 0.5 0.5 0.5; dur: 2000; easing: easeOutElastic');
            
            // Update instructions
            instructions.innerHTML = `
                <div class="text-center">
                    <div class="text-4xl mb-4">🕌</div>
                    <h3 class="text-lg font-semibold mb-2 text-slate-800">Taj Mahal Demo Active</h3>
                    <p class="text-sm text-slate-600 mb-4">Move your phone around to explore the 3D model!</p>
                </div>
            `;
        }
        
        function hideDemo() {
            const demoEntity = document.querySelector('#demo-monument');
            if (demoEntity) {
                demoEntity.parentNode.removeChild(demoEntity);
            }
            
            // Restore original instructions
            instructions.innerHTML = `
                <div class="ar-ui ar-instructions glass-effect rounded-2xl p-6 mx-4 text-center max-w-sm">
                    <div class="text-4xl mb-4">📱</div>
                    <h3 class="text-lg font-semibold mb-2 text-slate-800">Scan Hiro Marker</h3>
                    <p class="text-sm text-slate-600 mb-4">Point your camera at the Hiro marker to see the magnificent Taj Mahal in 3D with detailed historical information!</p>
                    
                    <div class="flex items-center space-x-2 text-xs mb-4">
                        <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
                        <span class="text-slate-600">Camera Active</span>
                    </div>
                    
                    <!-- Quick Marker Access -->
                    <div class="text-xs text-slate-500 mb-3">
                        <p class="mb-1">📱 <strong>Need a Hiro Marker?</strong></p>
                        <a href="https://ar-js-org.github.io/AR.js/data/images/hiro.png" 
                           target="_blank" 
                           class="text-blue-600 hover:text-blue-800 underline">
                            Download Hiro Marker →
                        </a>
                        <p class="mt-1 text-xs">Print it or display on another screen</p>
                    </div>
                </div>
            `;
        }

        // Mobile orientation warning
        function checkOrientation() {
            if (window.innerHeight < window.innerWidth && window.innerWidth < 768) {
                // Landscape on mobile
                const orientationWarning = document.createElement('div');
                orientationWarning.className = 'fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50';
                orientationWarning.innerHTML = `
                    <div class="text-center text-white p-8">
                        <div class="text-4xl mb-4">📱</div>
                        <h3 class="text-xl font-semibold mb-2">Rotate Your Device</h3>
                        <p class="text-sm opacity-75">Please rotate your device to portrait mode for the best AR experience</p>
                    </div>
                `;
                document.body.appendChild(orientationWarning);
                
                setTimeout(() => {
                    if (orientationWarning.parentNode) {
                        orientationWarning.parentNode.removeChild(orientationWarning);
                    }
                }, 3000);
            }
        }

        // Check orientation on load and resize
        window.addEventListener('load', checkOrientation);
        window.addEventListener('orientationchange', () => {
            setTimeout(checkOrientation, 500);
        });

        // Error handling for camera access
        navigator.mediaDevices.getUserMedia({ video: true })
            .then(function(stream) {
                console.log('Camera access granted');
                stream.getTracks().forEach(track => track.stop());
            })
            .catch(function(err) {
                console.error('Camera access denied:', err);
                const errorDiv = document.createElement('div');
                errorDiv.className = 'fixed inset-0 bg-red-900 bg-opacity-90 flex items-center justify-center z-50';
                errorDiv.innerHTML = `
                    <div class="text-center text-white p-8 glass-effect rounded-2xl mx-4">
                        <div class="text-4xl mb-4">📷</div>
                        <h3 class="text-xl font-semibold mb-2">Camera Access Required</h3>
                        <p class="text-sm opacity-75 mb-4">Please allow camera access to use the AR features</p>
                        <button onclick="window.location.reload()" class="btn-primary text-white px-4 py-2 rounded-full text-sm">
                            Retry
                        </button>
                    </div>
                `;
                document.body.appendChild(errorDiv);
            });

        // Performance optimization
        if (window.DeviceMotionEvent) {
            window.addEventListener('devicemotion', function(e) {
                // Reduce animation frequency on device motion for better performance
                if (Math.abs(e.acceleration.x) > 5 || Math.abs(e.acceleration.y) > 5) {
                    const monumentEntity = document.querySelector('#monument-entity');
                    if (monumentEntity) {
                        monumentEntity.setAttribute('animation', 'property: rotation; to: 0 360 0; loop: true; dur: 30000');
                    }
                }
            });
        }
    </script>
</body>

</html>